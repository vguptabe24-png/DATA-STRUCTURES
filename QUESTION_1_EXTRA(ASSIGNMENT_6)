#include <iostream>
using namespace std;

class Node {
public:
    int data;
    Node* next;
};

// Function to split a circular linked list into two halves
void splitCircularList(Node* head, Node** head1_ref, Node** head2_ref) {
    if (head == NULL)
        return;

    Node *slow = head, *fast = head;

    // Use slow and fast pointer to find mid-point
    while (fast->next != head && fast->next->next != head) {
        fast = fast->next->next;
        slow = slow->next;
    }

    // For even number of nodes, move fast to the last node
    if (fast->next->next == head)
        fast = fast->next;

    // Set the heads of the two halves
    *head1_ref = head;
    if (head->next != head)
        *head2_ref = slow->next;

    // Make first half circular
    fast->next = slow->next;
    // Make second half circular
    slow->next = head;
}

// Helper function to print a circular linked list
void printList(Node* head) {
    if (head == NULL)
        return;
    Node* temp = head;
    do {
        cout << temp->data << " ";
        temp = temp->next;
    } while (temp != head);
    cout << endl;
}

// Helper to create a new node
Node* newNode(int data) {
    Node* node = new Node();
    node->data = data;
    node->next = NULL;
    return node;
}

int main() {
    // Create circular linked list: 10->4->9->(back to 10)
    Node* head = newNode(10);
    head->next = newNode(4);
    head->next->next = newNode(9);
    head->next->next->next = head;  // Make it circular

    Node *head1 = NULL, *head2 = NULL;

    // Split the list
    splitCircularList(head, &head1, &head2);

    cout << "First Circular List: ";
    printList(head1);

    cout << "Second Circular List: ";
    printList(head2);

    return 0;
}
